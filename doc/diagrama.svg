<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="612px" preserveAspectRatio="none" style="width:979px;height:612px;background:#FFFFFF;" version="1.1" viewBox="0 0 979 612" width="979px" zoomAndPan="magnify"><title>Diagrama de Secuencia: Flujo RAG (Generación Aumentada por Recuperación)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="618.4609" x="182.1367" y="27.9951">Diagrama de Secuencia: Flujo RAG (Generación Aumentada por Recuperación)</text><g><title>Aplicaci.n Java .Orquestador.</title><rect fill="#FFFFFF" height="347.5938" style="stroke:#181818;stroke-width:1;" width="10" x="306.7349" y="152.0234"/></g><g><title>ChromaDB .all-minilm.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="703.6313" y="294.6875"/></g><g><title>Ollama .Mistral.latest.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="877.7261" y="205.2891"/></g><g><title>Ollama .Mistral.latest.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="877.7261" y="434.3516"/></g><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="783.3296" x="190.4048" y="167.0234"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="611.313" x="190.4048" y="256.4219"/><rect fill="none" height="125.6641" style="stroke:#000000;stroke-width:1.5;" width="783.3296" x="190.4048" y="345.8203"/><g><title>Usuario</title><rect fill="#000000" fill-opacity="0.00000" height="396.7266" width="8" x="30.6021" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="34" x2="34" y1="120.8906" y2="517.6172"/></g><g><title>Aplicaci.n Java .Orquestador.</title><rect fill="#000000" fill-opacity="0.00000" height="396.7266" width="8" x="307.7349" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="311.4048" x2="311.4048" y1="120.8906" y2="517.6172"/></g><g><title>ChromaDB .all-minilm.</title><rect fill="#000000" fill-opacity="0.00000" height="396.7266" width="8" x="704.6313" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="708.5449" x2="708.5449" y1="120.8906" y2="517.6172"/></g><g><title>Ollama .Mistral.latest.</title><rect fill="#000000" fill-opacity="0.00000" height="396.7266" width="8" x="878.7261" y="120.8906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="882.7178" x2="882.7178" y1="120.8906" y2="517.6172"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.2041" x="5" y="117.5889">Usuario</text><ellipse cx="34.6021" cy="53.0938" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.6021,61.0938 L34.6021,88.0938 M21.6021,69.0938 L47.6021,69.0938 M34.6021,88.0938 L21.6021,103.0938 M34.6021,88.0938 L47.6021,103.0938" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53.2041" x="5" y="529.6123">Usuario</text><ellipse cx="34.6021" cy="541.4141" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M34.6021,549.4141 L34.6021,576.4141 M21.6021,557.4141 L47.6021,557.4141 M34.6021,576.4141 L21.6021,591.4141 M34.6021,576.4141 L47.6021,591.4141" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222.6602" x="200.4048" y="89.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208.6602" x="207.4048" y="109.5889">Aplicación Java (Orquestador)</text></g><g class="participant participant-tail" data-participant="App"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222.6602" x="200.4048" y="516.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="208.6602" x="207.4048" y="536.6123">Aplicación Java (Orquestador)</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1729" x="625.5449" y="101.292">ChromaDB (all-minilm)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9805" x="637.6411" y="117.5889">Contenedor Docker</text><path d="M690.6313,52.2969 C690.6313,42.2969 708.6313,42.2969 708.6313,42.2969 C708.6313,42.2969 726.6313,42.2969 726.6313,52.2969 L726.6313,78.2969 C726.6313,88.2969 708.6313,88.2969 708.6313,88.2969 C708.6313,88.2969 690.6313,88.2969 690.6313,78.2969 L690.6313,52.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M690.6313,52.2969 C690.6313,62.2969 708.6313,62.2969 708.6313,62.2969 C708.6313,62.2969 726.6313,62.2969 726.6313,52.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160.1729" x="625.5449" y="529.6123">ChromaDB (all-minilm)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9805" x="637.6411" y="545.9092">Contenedor Docker</text><path d="M690.6313,559.2109 C690.6313,549.2109 708.6313,549.2109 708.6313,549.2109 C708.6313,549.2109 726.6313,549.2109 726.6313,559.2109 L726.6313,585.2109 C726.6313,595.2109 708.6313,595.2109 708.6313,595.2109 C708.6313,595.2109 690.6313,595.2109 690.6313,585.2109 L690.6313,559.2109" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M690.6313,559.2109 C690.6313,569.2109 708.6313,569.2109 708.6313,569.2109 C708.6313,569.2109 726.6313,569.2109 726.6313,559.2109" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="LLM"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0166" x="801.7178" y="101.292">Ollama (Mistral:latest)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9805" x="811.7358" y="117.5889">Contenedor Docker</text><ellipse cx="882.7261" cy="72.2969" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="870.7261" x2="894.7261" y1="86.2969" y2="86.2969"/></g><g class="participant participant-tail" data-participant="LLM"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0166" x="801.7178" y="529.6123">Ollama (Mistral:latest)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.9805" x="811.7358" y="545.9092">Contenedor Docker</text><ellipse cx="882.7261" cy="565.2109" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="870.7261" x2="894.7261" y1="579.2109" y2="579.2109"/></g><g><title>Aplicaci.n Java .Orquestador.</title><rect fill="#FFFFFF" height="347.5938" style="stroke:#181818;stroke-width:1;" width="10" x="306.7349" y="152.0234"/></g><g><title>ChromaDB .all-minilm.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="703.6313" y="294.6875"/></g><g><title>Ollama .Mistral.latest.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="877.7261" y="205.2891"/></g><g><title>Ollama .Mistral.latest.</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="877.7261" y="434.3516"/></g><g class="message" data-participant-1="User" data-participant-2="App"><polygon fill="#181818" points="294.7349,148.0234,304.7349,152.0234,294.7349,156.0234,298.7349,152.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="34.6021" x2="300.7349" y1="152.0234" y2="152.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="41.6021" y="146.9575">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.0874" x="54.6475" y="146.9575">Pregunta del Usuario (Prompt Inicial)</text></g><path d="M190.4048,167.0234 L488.3652,167.0234 L488.3652,174.1563 L478.3652,184.1563 L190.4048,184.1563 L190.4048,167.0234" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="783.3296" x="190.4048" y="167.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="252.9604" x="205.4048" y="180.0903">Extracción de Intención (Opcional)</text><g class="message" data-participant-1="App" data-participant-2="LLM"><polygon fill="#181818" points="865.7261,201.2891,875.7261,205.2891,865.7261,209.2891,869.7261,205.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="316.7349" x2="871.7261" y1="205.2891" y2="205.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="323.7349" y="200.2231">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306.6489" x="336.7803" y="200.2231">Llama a LLM (Extraer palabras clave/intención)</text></g><g class="message" data-participant-1="LLM" data-participant-2="App"><polygon fill="#181818" points="327.7349,230.4219,317.7349,234.4219,327.7349,238.4219,323.7349,234.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="321.7349" x2="881.7261" y1="234.4219" y2="234.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="333.7349" y="229.356">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="241.6616" x="346.7803" y="229.356">Devuelve Información Clave Extraída</text></g><path d="M190.4048,256.4219 L484.0615,256.4219 L484.0615,263.5547 L474.0615,273.5547 L190.4048,273.5547 L190.4048,256.4219" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="611.313" x="190.4048" y="256.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="248.6567" x="205.4048" y="269.4888">Búsqueda de Contexto (Retrieval)</text><g class="message" data-participant-1="App" data-participant-2="DB"><polygon fill="#181818" points="691.6313,290.6875,701.6313,294.6875,691.6313,298.6875,695.6313,294.6875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="316.7349" x2="697.6313" y1="294.6875" y2="294.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="323.7349" y="289.6216">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.5518" x="336.7803" y="289.6216">Consulta a ChromaDB (Usando Info Clave)</text></g><g class="message" data-participant-1="DB" data-participant-2="App"><polygon fill="#181818" points="327.7349,319.8203,317.7349,323.8203,327.7349,327.8203,323.7349,323.8203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="321.7349" x2="707.6313" y1="323.8203" y2="323.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="333.7349" y="318.7544">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349.8511" x="346.7803" y="318.7544">Devuelve Documentos/Chunks Relevantes (Contexto)</text></g><path d="M190.4048,345.8203 L505.0278,345.8203 L505.0278,352.9531 L495.0278,362.9531 L190.4048,362.9531 L190.4048,345.8203" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="125.6641" style="stroke:#000000;stroke-width:1.5;" width="783.3296" x="190.4048" y="345.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="269.623" x="205.4048" y="358.8872">Generación Aumentada (Generation)</text><path d="M321,367.9531 L321,407.9531 L560,407.9531 L560,377.9531 L550,367.9531 L321,367.9531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M550,367.9531 L550,377.9531 L560,377.9531 L550,367.9531" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.2197" x="327" y="385.02">Crea Prompt Final RAG:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218.6196" x="327" y="400.1528">"Pregunta: {Q} + Contexto: {C}"</text><g class="message" data-participant-1="App" data-participant-2="LLM"><polygon fill="#181818" points="865.7261,430.3516,875.7261,434.3516,865.7261,438.3516,869.7261,434.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="316.7349" x2="871.7261" y1="434.3516" y2="434.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="323.7349" y="429.2856">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.9805" x="336.7803" y="429.2856">Llama a LLM (Prompt Final RAG)</text></g><g class="message" data-participant-1="LLM" data-participant-2="App"><polygon fill="#181818" points="327.7349,459.4844,317.7349,463.4844,327.7349,467.4844,323.7349,463.4844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="321.7349" x2="881.7261" y1="463.4844" y2="463.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="333.7349" y="458.4185">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.543" x="346.7803" y="458.4185">Devuelve Respuesta Final</text></g><g class="message" data-participant-1="App" data-participant-2="User"><polygon fill="#181818" points="45.6021,495.6172,35.6021,499.6172,45.6021,503.6172,41.6021,499.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="39.6021" x2="310.7349" y1="499.6172" y2="499.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="51.6021" y="494.5513">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.1392" x="64.6475" y="494.5513">Respuesta Final Generada</text></g><!--SRC=[lLKzRzim4DtrAmuQMXc5ORJTD1Hmv2HGaQywIASk5-dYiA58bXz6WY8_gLEthFvZFTAExGHEqK6f9rFYtRjxx-x92oy99W9d5Zk4bk2Sca2g4LZ2WGpVDKp7Xr0SaYABZLZyLZ0E7IcFBOBH5gPytpo-6sJPMpX3wqKZ32fF3WfilBRyvmuQtHcjA3uUPEanv1Ske1Kw1tHmuSXcPXCD-TX8qQnWF-CSeJYrFm8vHjTsa8B6ncGjUhn4Hv1NrrPtEDbZM2c7dL12TeDlgj8CgeY3OAAR6x8fTBANSJ72tq5-AcNilpWMpbkKfKGkqhyOUNHqd6KOl5QXk-IYkUjXBpzEL9_KLNrQmfcbMM2UMHG9AvhwmyaYsJ3y5Fc3tM1Gd36PnaEjM12KB2wB9kPCJMAzpwOFnkVxyBw4_LkclraApiDOH_BJQLIhAssxvIpqXpopEfYNKNdUJ2EqYir3eeePO_6PiQCqC9XEHKh0V1gKU6bvG1g9Sng9TQ8OlYOlJW-amE5QW0dD0ybv1D_q2LLCionlyQj5ZchfIHfIRVywV2YXieHhFj8Et7eUY2bvAsYEShItU72yYMm2NobkSfgFdcNPOEmkOaiJtlWoNd51-gZAnWSk7AfM9rgNT3wHWYq0Ol0E8NZTaz5fDwgkWxfnR7MIOPUkzbZEuAacoL9UGPAF9MnRCFCn9MUI4q8n3hFao9ud5TwiBiP3xuhi_WmKsuW0IZCHLiokFUYhv1J0lpXHi3AK0y4R5JyiPNgLFxfF2J-_tCExjTPyhkvpliESfhJPNxVmUVP_NxeDcIduF-nPVL9keU9hEFoAg6JqvVCMLrAofsnroX5_0000]--></g></svg>